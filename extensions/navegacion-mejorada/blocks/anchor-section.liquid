{% comment %}
  Bloque: anchor-section.liquid
  Prop√≥sito: Agregar un punto de ancla a cualquier secci√≥n del tema
  Ubicaci√≥n: extensions/navegacion-mejorada/blocks/anchor-section.liquid
  
  Este bloque se puede agregar a CUALQUIER secci√≥n existente en Shopify
  desde el editor de temas, sin modificar el c√≥digo de la secci√≥n original.
{% endcomment %}

{% comment %}
  Solo renderiza si se ha configurado un ID de ancla
{% endcomment %}
{% if block.settings.anchor_id != blank %}
  <div 
    id="{{ block.settings.anchor_id | handle }}" 
    class="section-anchor"
    data-anchor-name="{{ block.settings.anchor_name | default: block.settings.anchor_id }}"
    data-show-in-nav="{{ block.settings.show_in_nav }}"
    data-scroll-offset="{{ block.settings.scroll_offset }}"
    aria-label="Ancla de navegaci√≥n: {{ block.settings.anchor_name | default: block.settings.anchor_id }}">
    
    {% comment %}
      Este div act√∫a como marcador invisible.
      El CSS lo posiciona correctamente para compensar headers fijos.
      No contiene contenido visible, solo sirve como punto de referencia.
    {% endcomment %}
  </div>
  
  {% comment %}
    Opcionalmente, agregar un indicador visual para debug (solo en modo desarrollo)
  {% endcomment %}
  {% if block.settings.debug_mode %}
    <div class="anchor-debug-indicator" style="
      background: rgba(255, 0, 0, 0.2);
      border: 2px dashed red;
      padding: 10px;
      margin: 10px 0;
      font-family: monospace;
      font-size: 12px;
    ">
      üéØ Ancla: #{{ block.settings.anchor_id | handle }}<br>
      üìù Nombre: {{ block.settings.anchor_name | default: block.settings.anchor_id }}<br>
      üìç Offset: {{ block.settings.scroll_offset }}px<br>
      üëÅÔ∏è Visible en nav: {{ block.settings.show_in_nav }}
    </div>
  {% endif %}
{% endif %}

{% comment %}
  Schema: Define los campos configurables en el editor de Shopify
{% endcomment %}
{% schema %}
{
  "name": "Ancla de Secci√≥n",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "‚öì Configuraci√≥n del Ancla"
    },
    {
      "type": "text",
      "id": "anchor_id",
      "label": "ID del ancla",
      "info": "Identificador √∫nico sin espacios ni caracteres especiales. Ejemplo: 'productos-destacados'",
      "placeholder": "productos-destacados",
      "default": ""
    },
    {
      "type": "text",
      "id": "anchor_name",
      "label": "Nombre visible",
      "info": "Texto que aparecer√° en el men√∫ de navegaci√≥n. Si est√° vac√≠o, se usar√° el ID.",
      "placeholder": "Productos Destacados",
      "default": ""
    },
    {
      "type": "header",
      "content": "üéõÔ∏è Opciones de Visualizaci√≥n"
    },
    {
      "type": "checkbox",
      "id": "show_in_nav",
      "label": "Mostrar en men√∫ de navegaci√≥n",
      "info": "Si est√° activo, aparecer√° en el men√∫ de navegaci√≥n autom√°tico",
      "default": true
    },
    {
      "type": "number",
      "id": "scroll_offset",
      "label": "Offset de scroll (p√≠xeles)",
      "info": "P√≠xeles adicionales para compensar headers fijos. Valor negativo sube, positivo baja.",
      "default": 0,
      "placeholder": "80"
    },
    {
      "type": "header",
      "content": "üîß Opciones Avanzadas"
    },
    {
      "type": "select",
      "id": "anchor_position",
      "label": "Posici√≥n del ancla",
      "options": [
        {
          "value": "before",
          "label": "Antes del contenido"
        },
        {
          "value": "after",
          "label": "Despu√©s del contenido"
        }
      ],
      "default": "before",
      "info": "D√≥nde colocar el punto de ancla en relaci√≥n al contenido de la secci√≥n"
    },
    {
      "type": "checkbox",
      "id": "debug_mode",
      "label": "Modo debug",
      "info": "Muestra informaci√≥n visual del ancla (solo para desarrollo)",
      "default": false
    },
    {
      "type": "paragraph",
      "content": "üí° **Tip:** Puedes agregar m√∫ltiples bloques de ancla a diferentes secciones para crear una navegaci√≥n completa de tu p√°gina."
    }
  ]
}
{% endschema %}