{%- comment -%}
  App Block: anchor-navigation-menu.liquid
  Prop√≥sito: Renderizar el contenedor del men√∫ de navegaci√≥n y cargar los assets.
  Toda la l√≥gica de renderizado del men√∫ y funcionalidad es manejada por JavaScript.
{%- endcomment -%}

<div id="shopify-block-{{ block.id }}" 
     class="anchor-nav-block"
     data-block-id="{{ block.id }}"
     data-header-offset="{{ block.settings.header_offset }}"
     data-scroll-duration="{{ block.settings.scroll_duration }}"
     data-auto-hide="{{ block.settings.auto_hide }}"
     data-auto-hide-delay="{{ block.settings.auto_hide_delay }}"
     data-show-progress="{{ block.settings.show_progress }}">

  {%- comment -%}
    Este contenedor ser√° poblado din√°micamente por el script 'navegacion-anclas.js'.
    Las clases de estilo se aplican aqu√≠ para controlar la apariencia.
  {%- endcomment -%}
  <div class="anchor-navigation anchor-nav-{{ block.settings.nav_position }} anchor-nav-style-{{ block.settings.nav_style }}"
       data-show-labels="{{ block.settings.show_labels }}">
    </div>

  {%- comment -%} Barra de progreso (opcional) controlada por el script. {%- endcomment -%}
  {%- if block.settings.show_progress -%}
    <div class="scroll-progress-indicator">
      <div class="scroll-progress-bar"></div>
    </div>
  {%- endif -%}
</div>

{%- comment -%} Carga de assets unificados {%- endcomment -%}
<link rel="stylesheet" href="{{ 'anchor-navigation.css' | asset_url }}">
<script src="{{ 'navegacion-anclas.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "üß≠ Men√∫ Anclas (App)",
  "target": "section",
  "settings": [
    { "type": "header", "content": "üìç Posici√≥n y Estilo" },
    {
      "type": "select",
      "id": "nav_position",
      "label": "Posici√≥n del men√∫",
      "options": [
        { "value": "fixed-left", "label": "Fijo a la izquierda" },
        { "value": "fixed-right", "label": "Fijo a la derecha" }
      ],
      "default": "fixed-right"
    },
    {
      "type": "select",
      "id": "nav_style",
      "label": "Estilo visual",
      "options": [
        { "value": "dots", "label": "Puntos" },
        { "value": "lines", "label": "L√≠neas" }
      ],
      "default": "dots"
    },
    { "type": "checkbox", "id": "show_labels", "label": "Mostrar etiquetas de texto", "default": false },

    { "type": "header", "content": "‚öôÔ∏è Comportamiento" },
    { "type": "text", "id": "header_offset", "label": "Offset del header (px o selector)", "default": "80", "info": "Ej: '80' o '#shopify-section-header'" },
    
    { "type": "header", "content": "üì± Responsive" },
    { "type": "checkbox", "id": "hide_on_mobile", "label": "Ocultar en m√≥viles", "default": false },
    
    { "type": "header", "content": "‚ú® Funcionalidades Adicionales" },
    { "type": "checkbox", "id": "auto_hide", "label": "Auto-ocultar men√∫", "default": false },
    { "type": "range", "id": "auto_hide_delay", "label": "Retraso para ocultar", "min": 1000, "max": 5000, "step": 500, "default": 3000, "unit": "ms" },
    { "type": "checkbox", "id": "show_progress", "label": "Mostrar barra de progreso", "default": false },
    { "type": "color", "id": "progress_color", "label": "Color barra de progreso", "default": "#000000" },
    { "type": "range", "id": "progress_height", "label": "Altura de la barra", "min": 2, "max": 10, "step": 1, "default": 3, "unit": "px" }
  ]
}
{% endschema %}